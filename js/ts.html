<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown to HTML</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.0/marked.min.js"></script>
</head>
<body>
  <div id="content"></div>

  <script>
    // Initialize custom renderer for marked
    const renderer = new marked.Renderer();
    renderer.code = function(code, language) {
      // Use highlight.js to highlight code, fallback to 'plaintext' if language is not found
      const validLanguage = hljs.getLanguage(language) ? language : 'plaintext';
      const highlighted = hljs.highlight(validLanguage, code).value;

      // Return HTML with syntax highlighting
      return `<pre><code class="hljs ${validLanguage}">${highlighted}</code></pre>`;
    };

    // Set marked options to use the custom renderer
    marked.setOptions({
      renderer: renderer
    });

    // Markdown input text
    const markdownString = `
      # Sample Markdown

      \`\`\`python
      print("Hello, World!")
      \`\`\`
    `;

    // Convert Markdown to HTML
    const htmlOutput = marked(markdownString);

    // Insert the converted HTML into the page
    document.getElementById('content').innerHTML = htmlOutput;

    // Highlight code blocks after conversion (in case any code blocks exist)
    hljs.highlightAll();
  </script>
</body>
</html>
